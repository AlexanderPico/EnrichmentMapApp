<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>EnrichmentMap_refactor</groupId>
  <version>1.3.0-SNAPSHOT</version>
  <artifactId>EnrichmentMap_refactor</artifactId>

  <dependencies>
  	<dependency>
  		<groupId>org.cytoscape</groupId>
  		<artifactId>cytoscape</artifactId>
  		<version>2.8.0</version>
  		<scope>system</scope>
  		<systemPath>/Applications/Cytoscape_v2.8.2/cytoscape.jar</systemPath>
  		</dependency>
  	<dependency>
  		<groupId>org.junit</groupId>
  		<artifactId>junit</artifactId>
  		<version>0.0.1</version>
  		<scope>system</scope>
  		<systemPath>${project.basedir}/lib/junit.jar</systemPath>
  	</dependency>
  </dependencies>
	<!--  repository settings are required for the build number maven plugin-->
	<scm>
		<connection>scm:svn:http://server1.baderlab.med.utoronto.ca/svn/EnrichmentMap</connection>
		<tag>HEAD</tag>
		<url>http://server1.baderlab.med.utoronto.ca/svn/EnrichmentMap</url>
	</scm>

	<profiles>
	<!-- Create two profiles.  One for the base Enrichment Map jar and One for the Enrichment map jar integrated into GSEA
	(profile: -PEnrichmentMap) Enrichment map jar contains plugin.props and Enrichment_Map_Plugin main class
	(profile: -PEM_gsea) GSEA Enrichment map plugin contains plugin_gsea.props and Enrichment_Map_Plugin_GSEA main class
	We need two different main classes so if both are installed Cytoscape is able to load both plugins if they are present without any conflicts
	Before building either of these profiles need to run mvn clean to make sure they are built correctly -->
	<profile>
		<id>EnrichmentMap</id>
		<activation>
      		<activeByDefault>true</activeByDefault>
    		</activation>
  		<build>
        		<finalName>${project.artifactId}-${project.version}-r${svn.revision}${svn.specialStatus}</finalName>
  			<plugins>
				<plugin>
          			<artifactId>maven-jar-plugin</artifactId>
          				<configuration>
            				<classifier></classifier>
            				<excludes>
            					<exclude>**/Enrichment_Map_Plugin_GSEA*</exclude>
            				</excludes>
          				</configuration>
        			</plugin>
      			  <plugin>
        				<groupId>org.apache.maven.plugins</groupId>
        				<artifactId>maven-compiler-plugin</artifactId>
        				<version>3.0</version>
        				<configuration>
          				<source>1.5</source>
          				<target>1.5</target>
        				</configuration>
      			  </plugin>
      			  <plugin>
                		<groupId>com.google.code.maven-svn-revision-number-plugin</groupId>
                		<artifactId>svn-revision-number-maven-plugin</artifactId>
                		<version>1.13</version> <!-- please use the latest version -->
                		<executions>
                    		<execution>
                        	<goals>
                        		<goal>revision</goal>
                        </goals>
                    		</execution>
                		</executions>
                		<configuration>
                    	<entries>
                        <entry>
							<prefix>svn</prefix>
                        </entry>
                    </entries>
                		</configuration>
            		  </plugin>
				  <plugin>
        				<groupId>org.codehaus.mojo</groupId>
        				<artifactId>buildnumber-maven-plugin</artifactId>
        				<version>1.1</version>
        				<executions>
          				<execution>
            					<phase>validate</phase>
            					<goals>
              					<goal>create</goal>
            					</goals>
          				</execution>
        				</executions>
        				<configuration>
          				<doCheck>true</doCheck>
          				<doUpdate>false</doUpdate>
          				<format>{0,number},{1,date,yyyy-MM-dd HH:mm:ss}</format>
          				<items>
            					<item>buildNumber</item>
            					<item>timestamp</item>
          				</items>
        				</configuration>
      			  </plugin>
    				</plugins>
    				<resources>
            			<resource>
                			<directory>${project.basedir}/src/main/resources</directory>
						<excludes>
							<exclude>plugin_gsea.props</exclude>
						</excludes>
                			<filtering>true</filtering>
            			</resource>
	    				<resource>
						<directory>${project.basedir}/resources</directory>
						<excludes>
							<exclude>EM_EBC_TestData/**</exclude>
							<exclude>Graphics_for_Manual/**</exclude>
							<exclude>scripts/**</exclude>
						</excludes>
	    				</resource>
        			</resources>
			</build>
		</profile>
	<profile>
		<id>EM_gsea</id>
  		<build>
        		<finalName>${project.artifactId}-${project.version}-r${svn.revision}${svn.specialStatus}</finalName>
  			<plugins>
				<plugin>
          			<artifactId>maven-jar-plugin</artifactId>
          				<configuration>
            				<classifier>gsea</classifier>
            				<excludes>
            					<exclude>**/Enrichment_Map_Plugin.*</exclude>
            				</excludes>
          				</configuration>
        			</plugin>
            		  <plugin>
        				<groupId>org.apache.maven.plugins</groupId>
        				<artifactId>maven-compiler-plugin</artifactId>
        				<version>3.0</version>
        				<configuration>
          				<source>1.5</source>
          				<target>1.5</target>
        				</configuration>
      			  </plugin>
      			  <plugin>
                		<groupId>com.google.code.maven-svn-revision-number-plugin</groupId>
                		<artifactId>svn-revision-number-maven-plugin</artifactId>
                		<version>1.13</version> <!-- please use the latest version -->
                		<executions>
                    		<execution>
                        	<goals>
                        		<goal>revision</goal>
                        </goals>
                    		</execution>
                		</executions>
                		<configuration>
                    	<entries>
                        <entry>
							<prefix>svn</prefix>
                        </entry>
                    </entries>
                		</configuration>
            		  </plugin>
				  <plugin>
        				<groupId>org.codehaus.mojo</groupId>
        				<artifactId>buildnumber-maven-plugin</artifactId>
        				<version>1.1</version>
        				<executions>
          				<execution>
            					<phase>validate</phase>
            					<goals>
              					<goal>create</goal>
            					</goals>
          				</execution>
        				</executions>
        				<configuration>
        					<doCheck>true</doCheck>
          				<doUpdate>false</doUpdate>
          				<format>{0,number},{1,date,yyyy-MM-dd HH:mm:ss}</format>
          				<items>
            					<item>buildNumber</item>
            					<item>timestamp</item>
          				</items>
        				</configuration>
      			  </plugin>
    				</plugins>
    				<resources>
            			<resource>
                			<directory>${project.basedir}/src/main/resources</directory>
						<excludes>
							<exclude>plugin.props</exclude>
						</excludes>
                			<filtering>true</filtering>
            			</resource>
	    				<resource>
						<directory>${project.basedir}/resources</directory>
						<excludes>
							<exclude>EM_EBC_TestData/**</exclude>
							<exclude>Graphics_for_Manual/**</exclude>
							<exclude>scripts/**</exclude>
						</excludes>
	    				</resource>
        			</resources>
			</build>
		</profile>
	</profiles>
</project>
